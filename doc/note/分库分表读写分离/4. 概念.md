## 数据库中间件
首先数据量大了之后肯定要分片。

分片之后，如果应用自己处理就需要直接面对分片集群，数据源切换，事务处理，数据聚合。用了中间件就可以集中业务处理，大量的通用的数据聚合，事务，数据源切换就由中间件处理。

## 逻辑库，表
    中间件可以看成是一个或者多个数据库集群构成的逻辑库。
    表也是逻辑的，实际中的可能已经被分片给很多很多表或者库上了。
    分片表， 一个表的数据分片存在不同库的不同表。如下图的配置：
<table name="t_node" primaryKey="vid" autoIncrement="true" dataNode="dn1,dn2" rule="rule1" />
    非分片表， 就是只有一张的表：<table name="t_node" primaryKey="vid" autoIncrement="true" dataNode="dn1" />
    ER表：  根据ER关系分表， 既子表会跟他依赖的主表在同一个库中，保证不会跨库。主要是依赖于表分组的概念。
    全局表：变动不频繁，量少 的字典表。所有分片都会有一个这个表的拷贝，来解决JOIN的问题。
    
## 分片相关
分片节点  每个表分片所在的数据库就是分片节点dataNode
节点主机  dataHost， 一个数据库Server,一个Server中可能有多个实例。
分片规则  
全局序列号

## 多租户
    共同的程序组件，确保各用户间的数据隔离。在数据存储上的主要方案：
    独立数据库，模型简化，安全，成本高，适合独立部署的那种买的系统
共享数据库，隔离数据架构。   每个租户一个schema.  难跨租户统计，数据恢复困难
同库同schmel, 通过表中的某个字段来区分。
    

功能与特性：
• 支持 SQL 92 标准
• 支持 Mysql 集群，可仌作为 Proxy 使用
• 支持 JDBC 连接夗数捤库
• 支持 NoSQL 数捤库
• 支持 galera for mysql 集群，percona-cluster 戒考 mariadb cluster，提供高可用忓数捤分片集群
• 自劢故障切换，高可用忓
• 支持读冐分离，支持 Mysql 双主夗仅，仌及一主夗仅癿模弅
• 支持全尿表，数捤自劢分片刡夗个节点，用二高效表关联查诟
• 支持独有癿基二 E-R 关系癿分片策略，实现了高效癿表关联查诟
• 支持一致忓 Hash 分片，有效览决分片扩容难题
• 夗平台支持，部署呾实斲简单
• 支持 Catelet 开収，类似数捤库存储过秳，用二跨分片复杂 SQL 癿人工智能编码实现，143 行 Demo 完成
跨分片癿丟个表癿 JION 查诟。
• 支持 NIO 不 AIO 丟种网络途信机刢，Windows 下建议 AIO，Linux 下目前建议 NIO
    


