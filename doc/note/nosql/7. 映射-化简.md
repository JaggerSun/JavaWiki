    集群改变了数据的存储和计算规则。
    映射-化简(分散-聚集)的方式是一种安排数据处理流程的手段，可以利用集群中的多台计算机，又可以将某台计算机所需要的数据及处理工作尽量放在本机执行。
    也就是hadoop中的Map-Reduce.

 7.1 基本 映射-化简
        比如我们用聚合的方式存订单，然后太大了，需要分片存储。 这个时候呢想要看七天内的总销售额， 这个时候需要查所有的分片七天内的订单，然后算总销售额。
        Map-Reduce是一个计算框架。 分别对应了两个函数。该框架会把M-R任务分派到合适的节点上去执行。
        Map任务是 输入聚集然后输出一堆的键值对，比如从订单聚合中得到商品价格信息。 然后Reduce方法入参是相同类型的键值对，出参是计算结果。  比如入商品信息，输出一个计算的总金额。
        
7.2 分区与归并
    为了增加Map-Reduce的并发处理和减少数据传输要做一些操作。
    可以把Map的结果分区，然后并发的化简。
    映射进入化简的时候如何减少数据传输呢，就是先归并，然后化简。
        
7.3 组合“映射-化简”计算
    在映射任务中只能操作同一个聚合内的数据，在化简时只能操作具有同一个关键字的数据。
    计算的思路要符合这个规则。    
        如果要计算某个商品在包含该商品的订单中的平均购买量是多少。
            这个时候需要先分区，然后归并分区中的所有订单，得到 订单数，该商品数的总和。   最后化简所有的分区。
            同样的模式也可以不归并，也就是订单数为1，然后该订单中商品的数量，最后化简。
    7.3.1 距离说明两阶段 映射-化简
        如果计算比较复杂可以使用管道和过滤器
        也就是将某个节点的输出作为下一个阶段的输入。
        比如要计算2011年每个月的销量与上一年同月份进行比较。
            分成两个阶段： 1。 计算出某个商品中某个月的销量， 第二个阶段用这个作为输入，然后得到2010年终同月份同商品的销量。
·        分阶段的还有一个好处就是可以重用，可以把第一个阶段的结果存储为物化视图。
7.4 可用增量式操作更新
            主要是增量式的更新物化视图，这样只修改变更部分的结果。
        
    