    有的操作靠事务无法满足，会导致事务打开过长，        这种可以使用时间戳来应对。
    
6.1 商业事务 与 系统事务
    系统事务是数据库事务， 商业事务是一些列业务操作。
    例如下单，然后吃完饭支付，这个时候有可能价格已经变了。
    这个属于离线并发的情况，适于使用乐观离线锁解决。是条件更新的一部分，在更新的时候监测是否一致没有变过。
        具体做法是增加一个版本戳每次变更自动加1. 或者使用GUID
    CAS
        数据库的机制里也有类似的悲观锁。
 
6.2 多节点中生成时间戳
    单主多从的时候，只有主节点写入版本戳，所以版本戳是自增长的，不会有问题。
    多主的时候， 最简单的是用时间戳，但是有可能不够精确和时间不同步的情况。
        或者找一个唯一的地方存储这个版本戳记录。
        nosql一般使用的数组式版本戳记录{"a":52, "b":1, "c":28}，每个节点上都会保存一份。客户端拿到这份记录，然后连到另外的一个节点上去更新记录， 跟另外节点上的对应的版本戳进行对比，对比通过更新，然后同步版本戳和数据。
        如果出现互相比对方大的时候，说明有写入冲突了。

         但是这些都没有解决多主节点同步的问题，只是会写入失败。并不能把请求分顺序，然后一次写入，没有版本合并的过程。
    