大规模分布式文件系统

设计要点：
1. 节点失效是正常的(操作系统bug,人工误操作，断电，自然灾害，硬件损坏，网络问题等等)。
    因此持续监测、错误检测、容错处理、自动恢复必须设计进来。
2. 因为存储量巨大，因此要避免数十亿的KB级小文件，文件系统的设计参数要重新考虑
3. 绝大多数场景都是在文件尾增加数据，已经写入的是顺序读。  基本不更新，不删除，不随即读。
        数据仓库、归档，日志等等需要从头分析的玩意儿。
4. 良好的对外的文件系统的API。
       比如保证原子性。

##设计概览
设计文件系统得时候列一些设计要点：
1. 大量廉价机， 经常故障， 持续监测，进行检查、容错、故障恢复。
2. 能对大文件进行有效管理，同时支持小文件
3. 大的流式读取，每次几百K，甚至1M以上的数据。同一个客户端顺序读。可能有少数随即读事件读取少量数据。
4. 写操作基本都被认为是顺序的超大的。
5. 非常明确的对多客户端并行添加同一个文件进行支持。  本质就是最小的原子操作的定义。比如多个并发的时候一个锁定一行，然后插入一大段。另外一个锁定别的行，然后插入一大段。  这个是常见的访问模式。比如多路并发写合并为一个文件。
6. 高性能的稳定带宽的网络比低延时更加重要， 不是很要求响应时间。而是大量的操作处理很大块很大块的数据。 比如发送一个排序命令。 然后排1000亿数据，但是30s才有结果。有点类似于存储过程。


